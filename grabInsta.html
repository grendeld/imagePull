<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <script type="text/javascript" src="d3/d3.min.js"></script>
   <script type="text/javascript" src="scripts/jquery-3.2.1.min.js"></script>
 </head>
 <body>
   <div>
     <p></p>
   </div>
 </body>
 <script>
/*go to https://www.instagram.com/explore/tags/(WHATEVER_TAG)/?__a=1
 point to media, nodes 0, thumbnail_src

This can possibly be inside a timer
 d3.request(url, function(error, response) {
 gets above url. Compares the thumbnail_src that needs to be stored somewhere as a variable first
    // Now use response to do some d3 magic
});
 */
 var IdValue = 0;
 $.getJSON("test.php", function(result){
   console.dir(result.tag.media.nodes);
       $.each(result.tag.media.nodes, function(i, field){
         console.dir(field);
           $("div").append("<img src='" + field.display_src + "'></img>");
});
IdValue = parseInt(result.tag.media.nodes[0].id);
});

setInterval(function(){
  $.getJSON("test.php", function(result){

    console.dir(result.tag.media.nodes);
        $.each(result.tag.media.nodes, function(i, field){
          console.dir(field);
          if (parseInt(field.id) > IdValue)
            $("div").append("<img src='" + field.display_src + "'></img>");
});
IdValue = parseInt(result.tag.media.nodes[0].id);
});

},3000);

/* function ajax_request() {

requestInfo='';

var params = JSON.stringify(requestInfo);

$.ajax({
  type: "GET",
  url: 'test.php',
  data: params,
  contentType: "application/json",
  dataType: "json",
  converters: {
    'text json': true
  },

  success: function(response) {
    $("p").html(response);

  },
  error: function(error) {
    $("p").html(error.responseText);

  }
});

}*/

/*var xhtp = new XMLHttpRequest();
xhtp.onreadystatechange = function(){
  console.log(this.statusText);
  //console.log(this.readyState);
  if(this.readyState == 4){
    console.dir(this.responseText);
  }
}
xhtp.open("GET","test.php",true);
xhtp.withCredentials = true;
//xhtp.setRequestHeader("Access-Control-Allow-Origin","*");
xhtp.send();*/
 </script>
 </html>
